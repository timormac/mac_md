# 简历

1-3年和3-5年简历写的内容不一样

面试aaa



asdasd



# 项目遇到问题

### kafka消息积压项目宕机

```sql
批量更新订单数据，maxwell是监控所有表,导致Kafka多了几百万数据。注意增加字段，不会有upsert的kafka信息
造成影响：
	/* 	监控工具直接短信报警
	   	数据积压了，后续进kafka其他表消息，无法消费到
	   	flink实时任务挂掉了，后台实时面板不更新
	*/
	
	解决方法:
					因为分区3个，只能3个消费者,开多线程。（不知道flink任务能开启多线程吗）
				  线程数是通过zookeeper动态调整的，我把核心线程数调成了8个，核心线程数改成了10个
				  
	复盘:		
					订单系统的批量操作一定提前通知下游系统团队。
					下游系统团队多线程调用订单查询接口一定要做压测。
					对消息积压情况加监控
	
```

### 算法要数据dwt层

算法要用户画像，

用户所有数据，

在线商品说有数据，

商户所有数据

每次看执行任务，最难的就是这个job，

弄了个dwt层，然后出问题，有一次导表，数据异常，有重复数据，然后dwt累加整层就废了。后面dwt分层拆开了，弄个dws日汇总。

注意dws命名的时候，要按功能分域，便于其他同事理解这块sql用途，算法域。

去百度下目前互联网数据仓库分层



### OOM 的解决方法

1  看sql的执行计划，看看有没有优化的地方

   熟悉数据情况，人工给数据分组，再解组

2 手动指定mr数量，增加并行度

3 设置参数jvm虚拟机的Xxm最大堆内存

# 技术栈

1 准备哪些技术栈

​	 永远学不完，准备真实自己项目用到的框架

2  每个技术栈应该怎么写

​	项目用到的核心技术栈，要拆分具体模块，写到的就会问，不会的不要写，问到了不会答就很尴尬

​    非核心技术栈写了解就行，不要拆分模块，仅限于使用，取数等，比如redis

   例子:spark的多模块，比如spark-core,spark-sql,spark-structStreaming没学不要写，然后任务执行流程，rdd原地，shuffle机			   			制,spark调优等。



对于具体的技术栈，可以仔细写一下划分模块,比如hbase读写流程，运行架构，rowkey设计,二级索引，phoneix等

技术栈原则:   写到的都要会，对于一些不常用不熟悉的，直接就写个了解azkaban等，不要展开，只限于写脚本，别的没深入



# 项目(github上找)

实时项目

不要直接写实时数仓的建设

flink项目用github上的实时推荐系统，对接算法提供数据



# 集群规模

群里有个人 28台,192G,32C，80T

阿里云上cpu只有1,2,4,8,16,32,64核的

选的是16cp 128g内存  40T硬盘   5台  一个服务器一台1年是3w 5台15w。



总订单数2000w条,5年，日活待定，日订单待定，新增用户数待定



# flume 

b站视频,flume问的挺多的

https://www.bilibili.com/video/BV1Va4y1X7Am/?spm_id_from=333.999.0.0&vd_source=dc2f0659a9d317ea4b839219ee320ab7

# 数仓



### 脏数据

来源  

1 业务数据或者埋点数据内容中有\t，sqoop导入时没做处理，后端没做非法字符校验

2  老的历史数据模型不一致问题

3 特殊场景下触发的bug，后端没测出来，缺少关键字段数据

4 order表中有的商品id字段应该创建了应该落，不过有的代码没落，他们补充主 订单表拿，但是用的时候用到这个字段

###  模型改善(dwt删除)

后续给删除了，总计用户所有销量，1年内销量等。有错误数据，每次都要洗。

或者把数据按天分区，只洗某一天的。

某一天数据同步出问题了。后续跑批，导致dwt出问题，只能回滚后续几天。		 

### 指标体系

业务数据

商品主题：

​	每日各品牌商家订单数，销售额，购买人数，退单金额，退单数量

​	每日各品类的订单数，销售额，购买人数，退单金额，退单数量

​	每日爆款商品top10，订单数，销售额，购买人数，退单金额，退单数量



交易主题：

​	每日订单数，订单金额，订单人数，退单数，退单人数，退单金额

​	每日各渠道带来的订单金额，订单数量，订单人数(微信公众号，小程序推广，直播，app购买)



用户主题：

​	每日新增用户数，

​	

用户行为数据

用户主题：

​	每日活跃用户数，活跃用户数，回流用户数

​	漏斗分析，每日首页浏览用户数，商品详情页用户数，当人下单人数，支付人数



app设计:

​	各个导航图标的点击数量







数仓分层



dwd层

数据清洗：数据格式不对的统一数据格式：比如日期格式。默认字段空和null转成一致，因为历史表可能不统一

数据加密：手机号等

增加常用字段主键：增加商户id，维护id，签约人员id，避免需要关联时关联多个表来拿指定字段。